const std = @import("std");
const sort = std.sort.sort;
const expectEqual = std.testing.expectEqual;
const expect = std.testing.expect;

const Enhuff = struct {
    sym: u8 = 0,
    code: []const u8,
    len: u5,
};

const Dehuff = struct {
    len: u5,
    codes: []const Enhuff,
};

pub const ENHUFF = enhuff(false);
const SORTED_ENHUFF = enhuff(true);
pub const DEHUFF = dehuff();

fn lt(_: void, lhs: Enhuff, rhs: Enhuff) bool {
    return lhs.len < rhs.len;
}

fn enhuff(sorted: bool) [257]Enhuff {
    var table = [257]Enhuff{
        .{ .code = &.{ 0b11111111, 0b11000000 }, .len = 13 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10110000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b00100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b00110000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b01000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b01010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b01100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b01110000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b10000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101010 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11110000 }, .len = 30 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b10010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b10100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11110100 }, .len = 30 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b10110000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b11000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b11010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b11100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b11110000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b00000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b00010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b00100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11111000 }, .len = 30 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b00110000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b01000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b01010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b01100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b01110000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b10000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b10010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b10100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b10110000 }, .len = 28 },
        .{ .code = &.{0b01010000}, .len = 6 },
        .{ .code = &.{ 0b11111110, 0b00000000 }, .len = 10 },
        .{ .code = &.{ 0b11111110, 0b01000000 }, .len = 10 },
        .{ .code = &.{ 0b11111111, 0b10100000 }, .len = 12 },
        .{ .code = &.{ 0b11111111, 0b11001000 }, .len = 13 },
        .{ .code = &.{0b01010100}, .len = 6 },
        .{ .code = &.{0b11111000}, .len = 8 },
        .{ .code = &.{ 0b11111111, 0b01000000 }, .len = 11 },
        .{ .code = &.{ 0b11111110, 0b10000000 }, .len = 10 },
        .{ .code = &.{ 0b11111110, 0b11000000 }, .len = 10 },
        .{ .code = &.{0b11111001}, .len = 8 },
        .{ .code = &.{ 0b11111111, 0b01100000 }, .len = 11 },
        .{ .code = &.{0b11111010}, .len = 8 },
        .{ .code = &.{0b01011000}, .len = 6 },
        .{ .code = &.{0b01011100}, .len = 6 },
        .{ .code = &.{0b01100000}, .len = 6 },
        .{ .code = &.{0b00000000}, .len = 5 },
        .{ .code = &.{0b00001000}, .len = 5 },
        .{ .code = &.{0b00010000}, .len = 5 },
        .{ .code = &.{0b01100100}, .len = 6 },
        .{ .code = &.{0b01101000}, .len = 6 },
        .{ .code = &.{0b01101100}, .len = 6 },
        .{ .code = &.{0b01110000}, .len = 6 },
        .{ .code = &.{0b01110100}, .len = 6 },
        .{ .code = &.{0b01111000}, .len = 6 },
        .{ .code = &.{0b01111100}, .len = 6 },
        .{ .code = &.{0b10111000}, .len = 7 },
        .{ .code = &.{0b11111011}, .len = 8 },
        .{ .code = &.{ 0b11111111, 0b11111000 }, .len = 15 },
        .{ .code = &.{0b10000000}, .len = 6 },
        .{ .code = &.{ 0b11111111, 0b10110000 }, .len = 12 },
        .{ .code = &.{ 0b11111111, 0b00000000 }, .len = 10 },
        .{ .code = &.{ 0b11111111, 0b11010000 }, .len = 13 },
        .{ .code = &.{0b10000100}, .len = 6 },
        .{ .code = &.{0b10111010}, .len = 7 },
        .{ .code = &.{0b10111100}, .len = 7 },
        .{ .code = &.{0b10111110}, .len = 7 },
        .{ .code = &.{0b11000000}, .len = 7 },
        .{ .code = &.{0b11000010}, .len = 7 },
        .{ .code = &.{0b11000100}, .len = 7 },
        .{ .code = &.{0b11000110}, .len = 7 },
        .{ .code = &.{0b11001000}, .len = 7 },
        .{ .code = &.{0b11001010}, .len = 7 },
        .{ .code = &.{0b11001100}, .len = 7 },
        .{ .code = &.{0b11001110}, .len = 7 },
        .{ .code = &.{0b11010000}, .len = 7 },
        .{ .code = &.{0b11010010}, .len = 7 },
        .{ .code = &.{0b11010100}, .len = 7 },
        .{ .code = &.{0b11010110}, .len = 7 },
        .{ .code = &.{0b11011000}, .len = 7 },
        .{ .code = &.{0b11011010}, .len = 7 },
        .{ .code = &.{0b11011100}, .len = 7 },
        .{ .code = &.{0b11011110}, .len = 7 },
        .{ .code = &.{0b11100000}, .len = 7 },
        .{ .code = &.{0b11100010}, .len = 7 },
        .{ .code = &.{0b11100100}, .len = 7 },
        .{ .code = &.{0b11111100}, .len = 8 },
        .{ .code = &.{0b11100110}, .len = 7 },
        .{ .code = &.{0b11111101}, .len = 8 },
        .{ .code = &.{ 0b11111111, 0b11011000 }, .len = 13 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b00000000 }, .len = 19 },
        .{ .code = &.{ 0b11111111, 0b11100000 }, .len = 13 },
        .{ .code = &.{ 0b11111111, 0b11110000 }, .len = 14 },
        .{ .code = &.{0b10001000}, .len = 6 },
        .{ .code = &.{ 0b11111111, 0b11111010 }, .len = 15 },
        .{ .code = &.{0b00011000}, .len = 5 },
        .{ .code = &.{0b10001100}, .len = 6 },
        .{ .code = &.{0b00100000}, .len = 5 },
        .{ .code = &.{0b10010000}, .len = 6 },
        .{ .code = &.{0b00101000}, .len = 5 },
        .{ .code = &.{0b10010100}, .len = 6 },
        .{ .code = &.{0b10011000}, .len = 6 },
        .{ .code = &.{0b10011100}, .len = 6 },
        .{ .code = &.{0b00110000}, .len = 5 },
        .{ .code = &.{0b11101000}, .len = 7 },
        .{ .code = &.{0b11101010}, .len = 7 },
        .{ .code = &.{0b10100000}, .len = 6 },
        .{ .code = &.{0b10100100}, .len = 6 },
        .{ .code = &.{0b10101000}, .len = 6 },
        .{ .code = &.{0b00111000}, .len = 5 },
        .{ .code = &.{0b10101100}, .len = 6 },
        .{ .code = &.{0b11101100}, .len = 7 },
        .{ .code = &.{0b10110000}, .len = 6 },
        .{ .code = &.{0b01000000}, .len = 5 },
        .{ .code = &.{0b01001000}, .len = 5 },
        .{ .code = &.{0b10110100}, .len = 6 },
        .{ .code = &.{0b11101110}, .len = 7 },
        .{ .code = &.{0b11110000}, .len = 7 },
        .{ .code = &.{0b11110010}, .len = 7 },
        .{ .code = &.{0b11110100}, .len = 7 },
        .{ .code = &.{0b11110110}, .len = 7 },
        .{ .code = &.{ 0b11111111, 0b11111100 }, .len = 15 },
        .{ .code = &.{ 0b11111111, 0b10000000 }, .len = 11 },
        .{ .code = &.{ 0b11111111, 0b11110100 }, .len = 14 },
        .{ .code = &.{ 0b11111111, 0b11101000 }, .len = 13 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11000000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b01100000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01001000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b01110000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b10000000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01001100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01010000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01010100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10110010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01011000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10110100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10110110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10111000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10111010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10111100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101011 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10111110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101100 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101101 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01011100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11000000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101110 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11000010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11000100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11000110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11001000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b11100000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01100000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11001010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01100100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11001100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11001110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101111 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01101000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b11101000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b10010000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01101100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01110000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11010000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11010010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b11110000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11010100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01110100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01111000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110000 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b11111000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01111100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11010110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11011000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00000000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00001000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10000000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00010000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11011010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10000100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11011100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11011110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b10100000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10001000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10001100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10010000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11100000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10010100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10011000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11100010 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111000, 0b00000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111000, 0b01000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b10110000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b00100000 }, .len = 19 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10011100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11100100 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10100000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110110, 0b00000000 }, .len = 25 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111000, 0b10000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111000, 0b11000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111001, 0b00000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111011, 0b11000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111011, 0b11100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111001, 0b01000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110001 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110110, 0b10000000 }, .len = 25 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b01000000 }, .len = 19 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00011000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111001, 0b10000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b00000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b00100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111001, 0b11000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b01000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110010 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00100000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00101000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111010, 0b00000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111010, 0b01000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11010000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b01100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b10000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b10100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b11000000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110011 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111110, 0b11010000 }, .len = 20 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00110000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10100100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b00111000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b01000000 }, .len = 21 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11100110 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10101000 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b10101100 }, .len = 22 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110111, 0b00000000 }, .len = 25 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110111, 0b10000000 }, .len = 25 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110100 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11110101 }, .len = 24 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111010, 0b10000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11101000 }, .len = 23 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111010, 0b11000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b11000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111011, 0b00000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111011, 0b01000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111100, 0b11100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b00000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b00100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b01000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b01100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11100000 }, .len = 28 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b10000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b10100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b11000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111101, 0b11100000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111110, 0b00000000 }, .len = 27 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111011, 0b10000000 }, .len = 26 },
        .{ .code = &.{ 0b11111111, 0b11111111, 0b11111111, 0b11111100 }, .len = 30 },
    };
    var i: u8 = 0;

    while (i < table.len - 2) : (i += 1)
        table[i].sym = i;
    table[i].sym = i;

    @setEvalBranchQuota(10_000);
    if (sorted)
        sort(Enhuff, &table, {}, lt);

    return table;
}

fn dehuff() [21]Dehuff {
    var groups: [21]Dehuff = undefined;
    var i: usize = 0;
    var s: usize = 0;
    var t: usize = 0;

    while (i < groups.len) : (i += 1) {
        s = t;
        groups[i].len = SORTED_ENHUFF[s].len;

        while (t < SORTED_ENHUFF.len and SORTED_ENHUFF[t].len == groups[i].len) : (t += 1) {}

        groups[i].codes = SORTED_ENHUFF[s..t];
    }

    return groups;
}

test "Dehuff groups" {
    var plen: u5 = 0;

    for (DEHUFF) |dh| {
        try expect(dh.len > plen);
        plen = dh.len;

        try expect(dh.codes.len > 0);

        for (dh.codes) |huff| {
            try expectEqual(dh.len, huff.len);
        }
    }
}

test "Dehuff one octet" {
    for (ENHUFF) |huff| {
        if (huff.len > 8)
            continue;

        found: for (DEHUFF) |dh| {
            if (dh.len > 8)
                return error.NoMatch;

            for (dh.codes) |huff2| {
                if (huff2.code[0] != huff.code[0])
                    continue;

                try expectEqual(huff2.sym, huff.sym);
                break :found;
            }
        }
    }
}

test "Dehuff octets" {
    for (ENHUFF) |huff| {
        found: for (DEHUFF) |dh| {
            for (dh.codes) |huff2| {
                if (!std.mem.eql(u8, huff.code, huff2.code))
                    continue;

                try expectEqual(huff2.sym, huff.sym);
                break :found;
            }
        } else {
            return error.NoMatch;
        }
    }
}

test "Dehuff a" {
    const a: u8 = 0b0001_1111;

    found: for (DEHUFF) |dh| {
        for (dh.codes) |huff| {
            if (a & 0xf8 == huff.code[0])
                break :found;
        } else {
            return error.NoMatch;
        }
    }
}
